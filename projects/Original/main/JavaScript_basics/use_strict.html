<main><page-content><nav-up><home- data-load_page="0" hover-style=""></home-><arrow-next></arrow-next><a data-load_page="1">Язык JavaScript</a><arrow-next></arrow-next><a data-load_page="7">Основы JavaScript</a></nav-up><h1>Современный стандарт, "use strict"</h1><p>Очень долго язык JavaScript развивался без потери совместимости. Новые возможности добавлялись в язык, но старые – никогда не менялись, чтобы не «сломать» уже существующие HTML/JS-страницы с их использованием.</p><p>Однако, это привело к тому, что любая ошибка в дизайне языка становилась «вмороженной» в него навсегда.</p><p>Так было до появления стандарта ECMAScript 5 (ES5), который одновременно добавил новые возможности и внёс в язык ряд исправлений, которые могут привести к тому, что старый код, который был написан до его появления, перестанет работать.</p><p>Чтобы этого не случилось, решили, что по умолчанию эти опасные изменения будут выключены, и код будет работать по-старому. А для того, чтобы перевести код в режим полного соответствия современному стандарту, нужно указать специальную директиву <code>use strict</code>.</p><p>Эта директива не поддерживается IE9-.</p><h2><a name="a" href="#a">Директива use strict</a></h2><p>Директива выглядит как строка <code>"use strict";</code> или <code>'use strict';</code> и ставится в начале скрипта.</p><p>Например:</p><code-example><script>`"use strict";\n\n// этот код будет работать по современному стандарту ES5\n...`</script></code-example><important-warn><h3>Отменить действие <code>use strict</code> никак нельзя</h3><p>Не существует директивы <code>no use strict</code> или подобной, которая возвращает в старый режим.</p><p>Если уж вошли в современный режим, то это дорога в один конец.</p></important-warn><important-><h3><code>use strict</code> для функций</h3><p>Через некоторое время мы будем проходить <a href="/function-basics">функции</a>. На будущее заметим, что <code>use strict</code> также можно указывать в начале функций, тогда строгий режим будет действовать только внутри функции.</p></important-><p>В следующих главах мы будем подробно останавливаться на отличиях в работе языка при <code>use strict</code> и без него.</p><h2><a name="b" href="#b">Нужен ли мне «use strict»?</a></h2><p>Если говорить абстрактно, то – да, нужен. В строгом режиме исправлены некоторые ошибки в дизайне языка, и вообще, современный стандарт – это хорошо.</p><p>Однако, есть и две проблемы.</p><strong>Поддержка браузеров IE9-, которые игнорируют <code>"use strict"</code>.</strong><p>Предположим, что мы, используя <code>"use strict"</code>, разработали код и протестировали его в браузере Chrome. Всё работает… Однако, вероятность ошибок при этом в IE9- выросла! Он-то всегда работает по старому стандарту, а значит, иногда по-другому. Возникающие ошибки придётся отлаживать уже в IE9-, и это намного менее приятно, нежели в Chrome.</p><p>Впрочем, проблема не так страшна. Несовместимостей мало. И если их знать (а в учебнике мы будем останавливаться на них) и писать правильный код, то всё будет в порядке и <code>"use strict"</code> станет нашим верным помощником.</p><strong>Библиотеки, написанные без учёта <code>"use strict"</code>.</strong><p>Некоторые библиотеки, которые написаны без <code>"use strict"</code>, не всегда корректно работают, если вызывающий код содержит <code>"use strict"</code>.</p><p>В первую очередь имеются в виду сторонние библиотеки, которые писали не мы, и которые не хотелось бы переписывать или править.</p><p>Таких библиотек мало, но при переводе давно существующих проектов на <code>"use strict"</code> эта проблема возникает с завидной регулярностью.</p><p>Вывод?</p><p><strong>Писать код с <code>use strict</code> следует лишь в том случае, если вы уверены, что описанных выше проблем не будет.</strong></p><p>Конечно же, весь код, который находится в этом учебнике, корректно работает в режиме <code>"use strict"</code>.</p><h2><a name="c" href="#c">ES5-shim</a></h2><p>Браузер IE8 поддерживает только совсем старую версию стандарта JavaScript, а именно ES3.</p><p>К счастью, многие возможности современного стандарта можно добавить в этот браузер, подключив библиотеку <a href="https://github.com/es-shims/es5-shim">ES5 shim</a>, а именно – скрипты <code>es5-shim.js</code> и <code>es5-sham.js</code> из неё.</p><h2><a name="d" href="#d">Итого</a></h2><p>В этой главе мы познакомились с понятием «строгий режим».</p><p>Далее мы будем предполагать, что разработка ведётся либо в современном браузере, либо в IE8- с подключённым <a href="https://github.com/es-shims/es5-shim">ES5 shim</a>. Это позволит нам использовать большинство возможностей современного JavaScript во всех браузерах.</p><p>Очень скоро, буквально в следующей главе, мы увидим особенности строгого режима на конкретных примерах.</p><banner-bottom class="banner-bottom" style="display: block;"></banner-bottom><nav-book data-tooltips="Структура кода; Переменные"></nav-book><share-map><share-></share-><map-button hover-style="" data-load_page="l"></map-button></share-map><comments- id="comments"></comments-><div id="disqus_thread"></div><script>disqus_url = "https:\/\/learn.javascript.ru\/strict-mode", disqus_identifier = "strict-mode", disqus_title = "\u0421\u043e\u0432\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0439 \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442, \"use strict\""</script></page-content></main>