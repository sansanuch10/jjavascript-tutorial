<main><page-content><nav-up><home- data-load_page="0" hover-style=""></home-><arrow-next></arrow-next><a data-load_page="219">Регулярные выражения</a></nav-up><h1>Многострочный режим, флаг "m"</h1><p>Многострочный режим включается, если у регэкспа есть флаг <code-pattern>/m</code-pattern>.</p><p>В этом случае изменяется поведение <code-pattern>^</code-pattern> и <code-pattern>$</code-pattern>.</p><p>В многострочном режиме якоря означают не только начало/конец текста, но и начало/конец строки.</p><h2><a name="0" href="#0">Начало строки ^</a></h2><p>В примере ниже текст состоит из нескольких строк. Паттерн <code-pattern>/^\d+/gm</code-pattern> берёт число с начала каждой строки:</p><code-example><script>`var str = '1е место: Винни\\n' +\n  '2е место: Пятачок\\n' +\n  '33е место: Слонопотам';\n\nalert( str.match(GOLD_/^\\d+/gm_GOLD) ); // 1, 2, 33`</script><code-toolbar></code-toolbar></code-example><p>Обратим внимание – без флага <code-pattern>/m</code-pattern> было бы найдено только первое число:</p><code-example><script>`var str = '1е место: Винни\\n' +\n  '2е место: Пятачок\\n' +\n  '33е место: Слонопотам';\n\nalert( str.match(GOLD_/^\\d+/g_GOLD) ); // 1`</script><code-toolbar></code-toolbar></code-example><p>Это потому что в обычном режиме каретка <code-pattern>^</code-pattern> – это только начало текста, а в многострочном – начало любой строки.</p><p>Движок регулярных выражений двигается по тексту, и как только видит начало строки, начинает искать там <code-pattern>\d+</code-pattern>.</p><h2><a name="1" href="#1">Конец строки $</a></h2><p>Символ доллара <code-pattern>$</code-pattern> ведёт себя аналогично.</p><p>Регулярное выражение <code-pattern>[а-я]+$</code-pattern> в следующем примере находит последнее слово в каждой строке:</p><code-example><script>`var str = '1е место: Винни\\n' +\n  '2е место: Пятачок\\n' +\n  '33е место: Слонопотам';\n\nalert( str.match(GOLD_/[а-я]+$/gim_GOLD) ); // Винни,Пятачок,Слонопотам`</script><code-toolbar></code-toolbar></code-example><p>Без флага <code-pattern>m</code-pattern> якорь <code-pattern>$</code-pattern> обозначал бы конец всего текста, и было бы найдено только последнее слово.</p><important-><h3>Якорь <code>$</code> против <code>\n</code></h3><p>Для того, чтобы найти конец строки, можно использовать не только <code>$</code>, но и символ <code>\n</code>.</p><p>Но, в отличие от <code>$</code>, символ <code>\n</code> во-первых берёт символ в результат, а во-вторых – не совпадает в конце текста (если, конечно, последний символ – не конец строки).</p><p>Посмотрим, что будет с примером выше, если вместо <code-pattern>[а-я]+$</code-pattern> использовать <code-pattern>[а-я]+\n</code-pattern>:</p><code-example><script>`var str = '1е место: Винни\\n' +\n  '2е место: Пятачок\\n' +\n  '33е место: Слонопотам';\n\nalert( str.match(GOLD_/[а-я]+\\n/gim_GOLD) );\n/*\nCOMMENTВинни\nCOMMENT,Пятачок\n*/`</script><code-toolbar></code-toolbar></code-example><p>Всего два результата: <code-match>Винни\n</code-match> (с символом перевода строки) и <code-match>Пятачок\n</code-match>. Последнее слово «Слонопотам» здесь не даёт совпадения, так как после него нет перевода строки.</p></important-><h2><a name="2" href="#2">Итого</a></h2><p>В мультистрочном режиме:</p><ul><li>Символ <code>^</code> означает начало строки.</li><li>Символ <code>$</code> означает конец строки.</li></ul><p>Оба символа являются проверками, они не добавляют ничего к результату. Про них также говорят, что «они имеют нулевую длину».</p><banner-bottom class="banner-bottom" style="display: block;"></banner-bottom><script>!function () { /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent) || screen.width < 1024 || "bannerBottomDisabled" in localStorage || (localStorage.bannerBottomShownCount || (localStorage.bannerBottomShownCount = 1), document.querySelector(".banner-bottom").style.display = "block") }();</script><nav-book data-tooltips="Начало строки ^ и конец $; Предпросмотр (неготово)"></nav-book><share-map><share-></share-><map-button hover-style="" data-load_page="l"></map-button></share-map><comments- id="comments"></comments-><div id="disqus_thread"></div><script>disqus_url = "https:\/\/learn.javascript.ru\/regexp-multiline-mode", disqus_identifier = "regexp-multiline-mode", disqus_title = "\u041c\u043d\u043e\u0433\u043e\u0441\u0442\u0440\u043e\u0447\u043d\u044b\u0439 \u0440\u0435\u0436\u0438\u043c, \u0444\u043b\u0430\u0433 \"m\"";</script></page-content></main>