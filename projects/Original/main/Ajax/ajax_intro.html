<main><page-content><nav-up><home- data-load_page="0" hover-style=""></home-><arrow-next></arrow-next><a data-load_page="160">AJAX и COMET</a></nav-up><h1>Введение в AJAX и COMET</h1><p>В этой главе мы «обзорно», на уровне возможностей и примеров рассмотрим технологию AJAX. Пока что с минимумом технических деталей.</p><p>Она будет полезна для понимания, что такое AJAX и с чем его едят.</p><h2><a name="0" href="#0">Что такое AJAX?</a></h2><p>AJAX (аббревиатура от «<strong>A</strong>synchronous <strong>J</strong>avascript <strong>A</strong>nd <strong>X</strong>ml») – технология обращения к серверу без перезагрузки страницы.</p><p>За счет этого уменьшается время отклика и веб-приложение по интерактивности больше напоминает десктоп.</p><p>Несмотря на то, что в названии технологии присутствует буква <code>X</code> (от слова XML), использовать XML вовсе не обязательно. Под AJAX подразумевают любое общение с сервером без перезагрузки страницы, организованное при помощи JavaScript.</p><h2><a name="1" href="#1">Что я могу сделать с помощью AJAX?</a></h2><dl><dt>Элементы интерфейса</dt><dd><p>В первую очередь AJAX полезен для форм и кнопок, связанных с элементарными действиями: добавить в корзину, подписаться, и т.п.</p><p>Сейчас – в порядке вещей, что такие действия на сайтах осуществляются без перезагрузки страницы.</p></dd><dt>Динамическая подгрузка данных</dt><dd><p>Например, дерево, которое при раскрытии узла запрашивает данные у сервера.</p></dd><dt>Живой поиск</dt><dd><p><em>Живой поиск</em> – классический пример использования AJAX, взятый на вооружение современными поисковыми системами.</p><p>Пользователь начинает печатать поисковую фразу, а JavaScript предлагает возможные варианты, получая список самых вероятных дополнений с сервера.</p><figure><img src="suggest.png" alt="" onclick="alert('этот пример - картинка, см. http://google.com');" width="100%" style="max-width:570px"></figure><p>Код, который это обеспечивает, работает следующим образом.</p><ol><li>Код активируется примерно при каждом нажатии клавиши, но не чаще чем раз в 100 мс (примерно).</li><li>Создается скрытый DIV и заполняется ответом сервера:<pre><code>- Текущий результат подсвечен, можно перемещаться и выбирать</code><code>- При нажатии правой стрелки или при клике -- поиск в подрезультатах</code></pre></li><li>Результаты запросов кешируются, повторных обращений к серверу не происходит.</li><li>В Google не только предлагаются варианты, но система тут же инициирует и сам поиск, т.е. не нужно даже нажимать `key:Enter`.</li></ol></dd></dl><p><strong>Технически, с помощью AJAX можно обмениваться любыми данными с сервером.</strong></p><p>Обычно используются форматы:</p><ul><li>JSON – для отправки и получения структурированных данных, объектов.</li><li>XML – если сервер почему-то работает в формате XML, то можно использовать и его, есть средства.</li><li>HTML/текст – можно и просто загрузить с сервера код HTML или текст для показа на странице.</li><li>Бинарные данные, файлы – гораздо реже, в современных браузерах есть удобные средства для них.</li></ul><h2><a name="2" href="#2">Что такое COMET?</a></h2><p><a href="https://ru.wikipedia.org/wiki/Comet_(%D0%BF%D1%80%D0%BE%D0%B3%D1%80%D0%B0%D0%BC%D0%BC%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5)">COMET</a> – общий термин, описывающий различные техники получения данных по инициативе сервера.</p><p>Можно сказать, что AJAX – это «отправил запрос – получил результат», а COMET – это «непрерывный канал, по которому приходят данные».</p><p>Примеры COMET-приложений:</p><ul><li>Чат – человек сидит и смотрит, что пишут другие. При этом новые сообщения приходят «сами по себе», он не должен нажимать на кнопку для обновления окна чата.</li><li>Аукцион – человек смотрит на экран и видит, как обновляется текущая ставка за товар.</li><li>Интерфейс редактирования – когда один редактор начинает изменять документ, другие видят информацию об этом. Возможно и совместное редактирование, когда редакторы видят изменения друг друга.</li></ul><p>На текущий момент технология COMET удобно реализуется во всех браузерах.</p><h2><a name="3" href="#3">Об этом разделе</a></h2><p>Здесь мы будем говорить об AJAX и COMET на низком уровне, на уровне веб-стандартов и их использования.</p><p>Существуют библиотеки и фреймворки, добавляющие удобства, например <a href="http://socket.io">Socket.io</a>, <a href="http://cometd.org/">CometD</a> и другие.</p><p>В принципе, можно начать их использовать и не зная, что внутри. Но, скорее всего, вам всё равно понадобится отлаживать ошибки, смотреть детали коммуникации, выбирать наилучшее решение для конкретной задачи, и здесь обязательно разбираться, как это всё работает.</p><banner-bottom class="banner-bottom" style="display: block;"></banner-bottom><script>!function () { /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent) || screen.width < 1024 || "bannerBottomDisabled" in localStorage || (localStorage.bannerBottomShownCount || (localStorage.bannerBottomShownCount = 1), document.querySelector(".banner-bottom").style.display = "block") }();</script><nav-book data-tooltips="AJAX и COMET; Node.JS для решения задач"></nav-book><share-map><share-></share-><map-button hover-style="" data-load_page="l"></map-button></share-map><comments- id="comments"></comments-><div id="disqus_thread"></div><script>disqus_url = "https:\/\/learn.javascript.ru\/ajax-intro", disqus_identifier = "ajax-intro", disqus_title = "\u0412\u0432\u0435\u0434\u0435\u043d\u0438\u0435 \u0432 AJAX \u0438 COMET";</script></page-content></main>