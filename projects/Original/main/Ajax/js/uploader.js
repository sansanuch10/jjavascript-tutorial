function Uploader(t,e,o,s){var n=t.name+"-"+t.size+"-"+ +t.lastModifiedDate;n=hashCode(n);var a,r,u=0,i=6,d=0;this.upload=function o(){console.log("upload: check status"),(r=new XMLHttpRequest).onload=r.onerror=function(){if(200==this.status)return d=+this.responseText||0,console.log("upload: startByte="+d),(a=new XMLHttpRequest).onload=a.onerror=function(){console.log("upload end status:"+this.status+" text:"+this.statusText),200!=this.status?u++<i?setTimeout(resume,1e3*u):onError(this.statusText):e()},a.open("POST","upload",!0),a.setRequestHeader("X-File-Id",n),a.upload.onprogress=function(t){u=0,s(d+t.loaded,d+t.total)},void a.send(t.slice(d));u++<i?setTimeout(o,1e3*u):onError(this.statusText)},r.open("GET","status",!0),r.setRequestHeader("X-File-Id",n),r.send()},this.pause=function(){r&&r.abort(),a&&a.abort()}}function hashCode(t){if(0==t.length)return 0;var e,o=0;for(e=0;e<t.length;e++)o=(o<<5)-o+t.charCodeAt(e),o|=0;return o}