<main><page-content><nav-up><home- data-load_page="0" hover-style=""></home-><arrow-next></arrow-next><a data-load_page="98">Документ, события, интерфейсы</a><arrow-next></arrow-next><a data-load_page="140">Формы, элементы управления</a></nav-up><h1>Навигация и свойства элементов формы</h1><p>Элементы управления, такие как <code>&lt;form&gt;</code>, <code>&lt;input&gt;</code> и другие имеют большое количество своих важных свойств и ссылок.</p><h2><a name="0" href="#0">Псевдомассив form.elements</a></h2><p>Элементы <code>FORM</code> можно получить по имени или номеру, используя свойство <code>document.forms[name/index]</code>.</p><p>Например:</p><code-example><script>`document.forms.my -- форма с именем GREEN_'my'_GREEN\ndocument.forms[0] -- первая форма в документе`</script></code-example><p><strong>Любой <em>элемент</em> формы <code>form</code> можно получить аналогичным образом, используя свойство <code>form.elements</code>.</strong></p><figure><img src="form.png" alt="" width="100%" style="max-width:385px"></figure><p>Например:</p><code-example><script>`<body>\n  <form name="my">\n    <input name="one" value="1">\n    <input name="two" value="2">\n  </form>\n\n  <script>\n    var form = document.forms.my; // можно document.forms[0]\n\n    var elem = form.elements.one; // можно form.elements[0]\n\n    alert( elem.value ); // 1\n  <\/script>\n</body>`</script><code-toolbar iframe="40"></code-toolbar></code-example><p><strong>Может быть несколько элементов с <em>одинаковым именем</em>. В таком случае <code>form.elements[name]</code> вернет коллекцию элементов</strong>, например:</p><code-example><script>`<body>\n<form>\n  <input type="radio" name="HIGHageLIGHT" value="10">\n  <input type="radio" name="HIGHageLIGHT" value="20">\n</form>\n\n<script>\nvar form = document.forms[0];\n\nvar elems = form.elements.age;\n\nalert(elems[0].value); // 10, первый input\n<\/script>\n</body>`</script><code-toolbar iframe="40"></code-toolbar></code-example><p>Эти ссылки не зависят от окружающих тегов. Элемент может быть «зарыт» где-то глубоко в форме, но он всё равно доступен через <code>form.elements</code>.</p><p><strong>Свойство <code>elements</code> также есть у элементов <code>&lt;fieldset&gt;</code>.</strong>Вот пример:</p><code-example><script>`<body>\n  <form>\n    <RED_fieldset_RED name="set">\n      <RED_legend_RED>fieldset</RED_legend_RED>\n      <input name="text" type="text">\n    </RED_fieldset_RED>\n  </form>\n&nbsp\n  <script>\n    var form = document.forms[0];\n\n    alert( form.elements.text ); // INPUT\nMARK    alert( form.elements.set.elements.text ); // INPUT\n  <\/script>\n</body>`</script><code-toolbar iframe="80"></code-toolbar></code-example><p>Спецификация: <a href="https://html.spec.whatwg.org/multipage/forms.html">HTML5 Forms</a>.</p><important-warn><h3>Доступ <code>form.name</code> тоже работает, но с особенностями</h3><p>Получить доступ к элементам формы можно не только через <code>form.elements[name/index]</code>, но и проще: <code>form[index/name]</code>.</p><p>Этот способ короче, но обладает одной неприятной особенностью: если к элементу обратиться по его <code>name</code>, а потом свойство <code>name</code> изменить, то он по-прежнему будет доступен под старым именем.</p><p>Звучит странно, поэтому посмотрим на примере.</p><code-example><script>`<form name="myform">\n  <input name="text">\n</form>\n\n<script>\n  var form = document.forms.myform;\n\n  alert( form.elements.text == form.text ); // true, это тот самый INPUT\n\n  form.text.name = "new-name"; // меняем name ему\n\n  // нет больше элемента с таким именем\n  alert( form.elements.text ); // undefined\n\n  alert( form.text ); //  INPUT (а должно быть undefined!)\n<\/script>`</script><code-toolbar iframe="40"></code-toolbar></code-example></important-warn><h2><a name="1" href="#1">Ссылка на форму element.form</a></h2><p>По элементу можно получить его форму, используя свойство <code>element.form</code>.</p><p>Пример:</p><code-example><script>`<body>\n<form>\n  <input type="text" name="HIGHsurnameLIGHT">\n</form>\n\n<script>\n  var form = document.forms[0];\n\n  var elem = form.elements.surname;\n\nMARK  alert(elem.form == form); // true\n<\/script>\n</body>`</script><code-toolbar iframe="40"></code-toolbar></code-example><p>Познакомиться с другими свойствами элементов можно в спецификации <a href="https://html.spec.whatwg.org/multipage/forms.html">HTML5 Forms</a>.</p><h2><a name="2" href="#2">Элемент label</a></h2><p>Элемент <code>label</code> – один из самых важных в формах.</p><p><strong>Клик на <code>label</code> засчитывается как фокусировка или клик на элементе формы, к которому он относится.</strong></p><p>Это позволяет посетителям кликать на большой красивой метке, а не на маленьком квадратике <code>input type=checkbox</code> (<code>radio</code>). Конечно, это очень удобно.</p><p>Есть два способа показать, какой элемент относится к <code>label</code>:</p><ol><li><p>Дать метке атрибут <code>for</code>, равный <code>id</code> соответствующего <code>input</code>:</p><code-example><script>`<table>\n  <tr>\n <td>\n <label for="agree">Согласен с правилами</label>\n </td>\n <td>\n <input id="agree" type="checkbox">\n </td>\n  </tr>\n  <tr>\n <td>\n <label for="not-a-robot">Я не робот</label>\n </td>\n <td>\n <input id="not-a-robot" type="checkbox">\n </td>\n  </tr>\n</table>`</script><code-toolbar- iframe="60"><a title="показать" data-code_run=""></a><div></div></code-toolbar-></code-example></li><li><p>Завернуть элемент в <code>label</code>. В этом случае можно обойтись без дополнительных атрибутов:</p><code-example><script>`<label>Кликни меня <input type="checkbox"></label>`</script><code-toolbar- iframe="40"><a title="показать" data-code_run=""></a><div></div></code-toolbar-></code-example></li></ol><h2><a name="3" href="#3">Элементы input и textarea</a></h2><p>Для большинства типов <code>input</code> значение ставится/читается через свойство <code>value</code>.</p><code-example><script>`input.value = "Новое значение";\ntextarea.value = "Новый текст";`</script></code-example><important-warn><h3>Не используйте <code>textarea.innerHTML</code></h3><p>Для элементов <code>textarea</code> также доступно свойство <code>innerHTML</code>, но лучше им не пользоваться: оно хранит только HTML, изначально присутствовавший в элементе, и не меняется при изменении значения.</p></important-warn><p>Исключения – <code>input type="checkbox"</code> и <code>input type="radio"</code></p><p><strong>Текущее «отмеченное» состояние для <code>checkbox</code> и <code>radio</code> находится в свойстве <code>checked</code> (<code>true/false</code>).</strong></p><code-example><script>`if (input.checked) {\n  alert( "Чекбокс выбран" );\n}`</script></code-example><h2><a name="4" href="#4">Элементы select и option</a></h2><p>Селект в JavaScript можно установить двумя путями: поставив значение  <code>select.value</code>, либо установив свойство <code>select.selectedIndex</code> в номер нужной опции.:</p><code-example><script>`select.selectedIndex = 0; // первая опция`</script></code-example><p>Установка <code>selectedIndex = -1</code> очистит выбор.</p><p><strong>Список элементов-опций доступен через <code>select.options</code>.</strong></p><p>Если <code>select</code> допускает множественный выбор (атрибут <code>multiple</code>), то значения можно получить/установить, сделав цикл по <code>select.options</code>. При этом выбранные опции будут иметь свойство <code>option.selected = true</code>.</p><p>Пример:</p><code-example><script>`<form name="form">\n  <select name="genre" HIGHBLUE_multiple_BLUELIGHT>\n    <option value="blues" BLUE_selected_BLUE>Мягкий блюз</option>\n    <option value="rock" BLUE_selected_BLUE>Жёсткий рок</option>\n    <option value="classic">Классика</option>\n  </select>\n</form>\n&nbsp\n<script>\nvar form = document.forms[0];\nvar select = form.elements.genre;\n\nfor (var i = 0; i < select.options.length; i++) {\n  var option = select.options[i];\nMARK  if(option.selected) {\nMARK    alert( option.value );\nMARK  }\n}\n<\/script>`</script><code-toolbar iframe="88"></code-toolbar></code-example><p>Спецификация: <a href="https://html.spec.whatwg.org/multipage/forms.html#the-select-element">the select element</a>.</p><important-><h3><code>new Option</code></h3><p>В стандарте <a href="https://html.spec.whatwg.org/multipage/forms.html#the-option-element">the option element</a> есть любопытный короткий синтаксис для создания элемента с тегом <code>option</code>:</p><code-example><script>`option = new Option(text, value, defaultSelected, selected);`</script></code-example><p>Параметры:</p><ul><li><code>text</code> – содержимое,</li><li><code>value</code> – значение,</li><li><code>defaultSelected</code> и <code>selected</code> поставьте в <code>true</code>, чтобы сделать элемент выбранным.</li></ul><p>Его можно использовать вместо <code>document.createElement('option')</code>, например:</p><code-example><script>`var option = new Option("Текст", "value");\n// создаст <option value="value">Текст</option>`</script></code-example><p>Такой же элемент, но выбранный:</p><code-example><script>`var option = new Option("Текст", "value", true, true);`</script></code-example></important-><important-><h3>Дополнительные свойства <code>option</code></h3><p>У элементов <code>option</code> также есть особые свойства, которые могут оказаться полезными (см. <a href="https://html.spec.whatwg.org/multipage/forms.html#the-option-element">the option element</a>):</p><dl><dt><code>selected</code></dt><dd>выбрана ли опция</dd><dt><code>index</code></dt><dd>номер опции в списке селекта</dd><dt><code>text</code></dt><dd>Текстовое содержимое опции (то, что видит посетитель).</dd></dl></important-><h2><a name="5" href="#5">Итого</a></h2><p>Свойства для навигации по формам:</p><dl><dt><code>document.forms</code></dt><dd>Форму можно получить как <code>document.forms[name/index]</code>.</dd><dt><code>form.elements</code></dt><dd>Элементы в форме: <code>form.elements[name/index]</code>. Каждый элемент имеет ссылку на форму в свойстве <code>form</code>. Свойство <code>elements</code> также есть у <code>&lt;fieldset&gt;</code>.</dd></dl><p>Значение элементов читается/ставится через <code>value</code> или <code>checked</code>.</p><p>Для элемента <code>select</code> можно задать опцию по номеру через <code>select.selectedIndex</code> и перебрать опции через <code>select.options</code>. При этом выбранные опции (в том числе при мультиселекте) будут иметь свойство <code>option.selected = true</code>.</p><h2 id="tasks"><a href="#6" name="6">Задачи (1)</a></h2><task-content><h3><a href="#12" name="12">Добавьте опцию к селекту</a><task-open hover-style="" data-show_task="" title="Открыть задачу"></task-open></h3><span title="Насколько эта задача важна для освоения материала, от 1 до 5">важность: 5</span><p>Есть селект:</p><code-example><script>`<select>\n  <option value="Rock">Рок</option>\n  <option value="Blues" selected>Блюз</option>\n</select>`</script></code-example><p>При помощи JavaScript:</p><ol style="margin-bottom: 20px;"><li>Выведите значение и текст текущей выбранной опции.</li><li>Добавьте опцию: <code>&lt;option value="Classic"&gt;Классика&lt;/option&gt;</code>.</li><li>Сделайте её выбранной.</li></ol><button-answer data-toggle_answer="" style="">решение</button-answer><task-answer><close- title="закрыть" data-close_answer=""></close-><p>Решение:</p><code-example><script>`<select>\n  <option value="Rock">Рок</option>\n  <option value="Blues" selected>Блюз</option>\n</select>\n&nbsp\n<script>\n  var select = document.body.children[0];\n\n  // 1)\n  var selectedOption = select.options[select.selectedIndex];\n  alert( selectedOption.value  + " -&nbsp" + selectedOption.text );\n\n  // 2)\n  var newOption = new Option("Classic", "Классика");\n  select.appendChild(newOption);\n\n  // 3)\n  newOption.selected = true;\n<\/script>`</script><code-toolbar iframe="40"></code-toolbar></code-example></task-answer></task-content><banner-bottom class="banner-bottom" style="display: block;"></banner-bottom><script>!function () { /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent) || screen.width < 1024 || "bannerBottomDisabled" in localStorage || (localStorage.bannerBottomShownCount || (localStorage.bannerBottomShownCount = 1), document.querySelector(".banner-bottom").style.display = "block") }();</script><nav-book data-tooltips="Формы, элементы управления; Фокусировка: focus/blur"></nav-book><share-map><share-></share-><map-button hover-style="" data-load_page="l"></map-button></share-map><comments- id="comments"></comments-><div id="disqus_thread"></div><script>disqus_url = "https:\/\/learn.javascript.ru\/form-elements", disqus_identifier = "form-elements", disqus_title = "\u041d\u0430\u0432\u0438\u0433\u0430\u0446\u0438\u044f \u0438 \u0441\u0432\u043e\u0439\u0441\u0442\u0432\u0430 \u044d\u043b\u0435\u043c\u0435\u043d\u0442\u043e\u0432 \u0444\u043e\u0440\u043c\u044b";</script></page-content></main>