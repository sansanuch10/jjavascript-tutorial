<main><page-content><nav-up><home- data-load_page="0" hover-style=""></home-><arrow-next></arrow-next><a data-load_page="197">CSS для JavaScript-разработчика</a></nav-up><h1>Знаете ли вы селекторы?</h1><p>CSS3-селекторы – фундаментально полезная вещь.</p><p>Даже если вы почему-то (старый IE?) не пользуетесь ими в CSS, есть много фреймворков для их кросс-браузерного использования CSS3 из JavaScript.</p><p>Поэтому эти селекторы необходимо знать.</p><h2><a name="0" href="#0">Основные виды селекторов</a></h2><p>Основных видов селекторов всего несколько:</p><ul><li><code>*</code> – любые элементы.</li><li><code>div</code> – элементы с таким тегом.</li><li><code>#id</code> – элемент с данным <code>id</code>.</li><li><code>.class</code> – элементы с таким классом.</li><li><code>[name="value"]</code> – селекторы на атрибут (см. далее).</li><li><code>:visited</code> – «псевдоклассы», остальные разные условия на элемент (см. далее).</li></ul><p><strong>Селекторы можно комбинировать, записывая последовательно, без пробела:</strong></p><ul><li><code>.c1.c2</code> – элементы одновременно с двумя классами <code>c1</code> и <code>c2</code></li><li><code>a#id.c1.c2:visited</code> – элемент <code>a</code> с данным <code>id</code>, классами <code>c1</code> и <code>c2</code>, и псевдоклассом <code>visited</code></li></ul><h2><a name="1" href="#1">Отношения</a></h2><p>В CSS3 предусмотрено четыре вида отношений между элементами.</p><p>Самые известные вы наверняка знаете:</p><ul><li><code>div p</code> – элементы <code>p</code>, являющиеся потомками <code>div</code>.</li><li><code>div &gt; p</code> – только непосредственные потомки</li></ul><p>Есть и два более редких:</p><ul><li><code>div ~ p</code> – правые соседи: все <code>p</code> на том же уровне вложенности, которые идут после <code>div</code>.</li><li><code>div + p</code> – первый правый сосед: <code>p</code> на том же уровне вложенности, который идёт сразу после <code>div</code> (если есть).</li></ul><p>Посмотрим их на примере HTML:</p><code-example><script>`<h3>Балтославянские языки</h3>\n\n<ol id="languages">\n  ...Вложенный OL/LI список языков...\n</ol>`</script></code-example><p>CSS-селекторы:</p><code-example><script>`/*+ no-beautify */\nGOLD_#languages li_GOLD {\n  color: brown;   /* потомки #languages, подходящие под селектор  LI */\n}\n\nGOLD_#languages > li_GOLD {\n  color: black;   /* первый уровень детей #languages подходящих под LI */\n}\n\nGOLD_#e-slavic_GOLD { font-style: italic; }\n\nMARKGOLD_#e-slavic ~ li_GOLD {  /* правые соседи #e-slavic с селектором LI */\nMARK  color: red;\nMARK}\n\nGOLD_#latvian_GOLD {\n  font-style: italic;\n}\n\nGOLD_#latvian *_GOLD {      /* потомки #latvian, подходяще под * (т.е. любые) */\n  font-style: normal;\n}\n\nMARKGOLD_#latvian + li_GOLD {  /* первый правый сосед #latvian с селектором LI */\nMARK color: green;\nMARK}`</script></code-example><p>Результат:</p><code-result-><code-toolbar><a href="selectors.html" target="_blank" title="открыть в новом окне" data-code_run="0"></a><a target="_blank" title="редактировать в песочнице" href="http://plnkr.co/edit/2NwEOrLmpa7dRZCKHNzQ?p=preview"></a></code-toolbar><iframe style="height:330px" src="selectors.html"></iframe></code-result-><h2><a name="2" href="#2">Фильтр по месту среди соседей</a></h2><p>При выборе элемента можно указать его место среди соседей.</p><p>Список псевдоклассов для этого:</p><ul><li><p><code>:first-child</code> – первый потомок своего родителя.</p></li><li><p><code>:last-child</code> – последний потомок своего родителя.</p></li><li><p><code>:only-child</code> – единственный потомок своего родителя, соседних элементов нет.</p></li><li><p><code>:nth-child(a)</code> – потомок номер <code>a</code> своего родителя, например <code>:nth-child(2)</code> – второй потомок. Нумерация начинается с <code>1</code>.</p></li><li><p><code>:nth-child(an+b)</code> – расширение предыдущего селектора через указание номера потомка формулой, где <code>a,b</code> – константы, а под <code>n</code> подразумевается любое целое число.</p><p>Этот псевдокласс будет фильтровать все элементы, которые попадают под формулу при каком-либо <code>n</code>. Например:-<code>:nth-child(2n)</code> даст элементы номер <code>2</code>, <code>4</code>, <code>6</code>…, то есть чётные.</p><ul><li><code>:nth-child(2n+1)</code> даст элементы номер <code>1</code>, <code>3</code>…, то есть нечётные.</li><li><code>:nth-child(3n+2)</code> даст элементы номер <code>2</code>, <code>5</code>, <code>8</code> и так далее.</li></ul></li></ul><p>Пример использования для выделения в списке:</p><code-result-><code-toolbar-><a-></a-><a title="открыть в новом окне" data-new_window=""></a><a title="редактировать в песочнице" data-code_edit=""></a></code-toolbar-><iframe style="height:300px" src="selectors_nthchild.html"></iframe></code-result-><code-example><script>`/*+ hide="CSS к примеру выше"  no-beautify */\nGOLD_li:nth-child(2n)_GOLD { /* чётные */\n  background: #eee;\n}\n\nGOLD_li:nth-child(3)_GOLD {  /* 3-ий потомок */\n  color: red;\n}`</script></code-example><ul><li><code>:nth-last-child(a)</code>, <code>:nth-last-child(an+b)</code> – то же самое, но отсчёт начинается с конца, например <code>:nth-last-child(2)</code> – второй элемент с конца.</li></ul><h2><a name="3" href="#3">Фильтр по месту среди соседей с тем же тегом</a></h2><p>Есть аналогичные псевдоклассы, которые учитывают не всех соседей, а только с тем же тегом:</p><ul><li><code>:first-of-type</code></li><li><code>:last-of-type</code></li><li><code>:only-of-type</code></li><li><code>:nth-of-type</code></li><li><code>:nth-last-of-type</code></li></ul><p>Они имеют в точности тот же смысл, что и обычные <code>:first-child</code>, <code>:last-child</code> и так далее, но во время подсчёта игнорируют элементы с другими тегами, чем тот, к которому применяется фильтр.</p><p>Пример использования для раскраски списка <code>DT</code> «через один» и предпоследнего <code>DD</code>:</p><code-result-><code-toolbar-><a-></a-><a title="открыть в новом окне" data-new_window=""></a><a title="редактировать в песочнице" data-code_edit=""></a></code-toolbar-><iframe style="height:300px" src="selectors_nthchild_1.html"></iframe></code-result-><code-example><script>`/*+ hide="CSS к примеру выше"  no-beautify */\nGOLD_dt:nth-of-type(2n)_GOLD {\n  /* чётные dt (соседи с другими тегами игнорируются) */\n  background: #eee;\n}\n\nGOLD_dd:nth-last-of-type(2)_GOLD {\n  /* второй dd снизу */\n  color: red;\n}`</script></code-example><p>Как видим, селектор <code>dt:nth-of-type(2n)</code> выбрал каждый второй элемент <code>dt</code>, причём другие элементы (<code>dd</code>) в подсчётах не участвовали.</p><h2><a name="4" href="#4">Селекторы атрибутов</a></h2><p>На атрибут целиком:</p><ul><li><code>[attr]</code> – атрибут установлен,</li><li><code>[attr="val"]</code> – атрибут равен <code>val</code>.</li></ul><p>На начало атрибута:</p><ul><li><code>[attr^="val"]</code> – атрибут начинается с <code>val</code>, например <code>"value"</code>.</li><li><code>[attr|="val"]</code> – атрибут равен <code>val</code><em>или</em> начинается с <code>val-</code>, например равен <code>"val-1"</code>.</li></ul><p>На содержание:</p><ul><li><code>[attr*="val"]</code> – атрибут содержит подстроку <code>val</code>, например равен <code>"myvalue"</code>.</li><li><code>[attr~="val"]</code> – атрибут содержит <code>val</code> как одно из значений через пробел.</li></ul><p>Например: <code>[attr~="delete"]</code> верно для <code>"edit delete"</code> и неверно для <code>"undelete"</code> или <code>"no-delete"</code>.</p><p>На конец атрибута:</p><ul><li><code>[attr$="val"]</code> – атрибут заканчивается на <code>val</code>, например равен <code>"myval"</code>.</li></ul><h2><a name="5" href="#5">Другие псевдоклассы</a></h2><ul><li><p><code>:not(селектор)</code> – все, кроме подходящих под селектор.</p></li><li><p><code>:focus</code> – в фокусе.</p></li><li><p><code>:hover</code> – под мышью.</p></li><li><p><code>:empty</code> – без детей (даже без текстовых).</p></li><li><p><code>:checked</code>, <code>:disabled</code>, <code>:enabled</code> – состояния <code>INPUT</code>.</p></li><li><p><code>:target</code> – этот фильтр сработает для элемента, <code>ID</code> которого совпадает с анкором <code>#...</code> текущего URL.</p><p>Например, если на странице есть элемент с <code>id="intro"</code>, то правило <code>:target { color: red }</code> подсветит его в том случае, если текущий URL имеет вид <code>http://...#intro</code>.</p></li></ul><h2><a name="6" href="#6">Псевдоэлементы ::before, ::after</a></h2><p>«Псевдоэлементы» – различные вспомогательные элементы, которые браузер записывает или может записать в документ.</p><p>При помощи <em>псевдоэлементов</em><code>::before</code> и <code>::after</code> можно добавлять содержимое в начало и конец элемента:</p><code-example><script>`<style>\n  GOLD_li::before_GOLD {\n    content: " [[ ";\n  }\n\n  GOLD_li::after_GOLD {\n    content: " ]] ";\n  }\n</style>\n\nОбратите внимание: содержимое добавляется <b>внутрь</b> LI.\n\n<ul>\n  <li>Первый элемент</li>\n  <li>Второй элемент</li>\n</ul>`</script><code-toolbar- iframe="150"><a data-code_run="0" title="показать"></a><a-></a-></code-toolbar-></code-example><p>Псевдоэлементы <code>::before</code>/<code>::after</code> добавили содержимое в начало и конец каждого <code>LI</code>.</p><important-><h3><code>:before</code> или <code>::before</code>?</h3><p>Когда-то все браузеры реализовали эти псевдоэлементы с одним двоеточием: <code>:after/:before</code>.</p><p>Стандарт с тех пор изменился и сейчас все, кроме IE8, понимают также современную запись с двумя двоеточиями. А для IE8 нужно по-прежнему одно.</p><p>Поэтому если вам важна поддержка IE8, то имеет смысл использовать одно двоеточие.</p></important-><h2><a name="7" href="#7">Практика</a></h2><p>Вы можете использовать информацию выше как справочную для решения задач ниже, которые уже реально покажут, владеете вы CSS-селекторами или нет.</p><h2 id="tasks"><a href="#8" name="8">Задачи (3)</a></h2><task-content><h3><a href="#11" name="11">Выберите элементы селектором</a><task-open hover-style="" data-show_task="" title="Открыть задачу"></task-open></h3><span title="Насколько эта задача важна для освоения материала, от 1 до 5">важность: 5</span><p>HTML-документ:</p><code-example><script>`<input type="checkbox">\n<input type="checkbox" checked>\n<input type="text" id="message">\n\n<h3 id="widget-title">Сообщения:</h3>\n<ul id="messages">\n  <li id="message-1">Сообщение 1</li>\n  <li id="message-2">Сообщение 2</li>\n  <li id="message-3" data-action="delete">Сообщение 3</li>\n  <li id="message-4" data-action="edit do-not-delete">Сообщение 4</li>\n  <li id="message-5" data-action="edit delete">Сообщение 5</li>\n  <li><a href="#">...</a></li>\n</ul>\n\n<a href="http://site.com/list.zip">Ссылка на архив</a>\n<a href="http://site.com/list.pdf">..И на PDF</a>`</script><code-toolbar- iframe="290"><a data-code_run="0" title="показать"></a><a-></a-><a title="редактировать в песочнице" data-code_edit=""></a></code-toolbar-></code-example><p>Задания:</p><ol><li>Выбрать <code>input</code> типа <code>checkbox</code>.</li><li>Выбрать <code>input</code> типа <code>checkbox</code>, НЕ отмеченный.</li><li>Найти все элементы с <code>id=message</code> или <code>message-*</code>.</li><li>Найти все элементы с <code>id=message-*</code>.</li><li>Найти все ссылки с расширением <code>href="...zip"</code>.</li><li>Найти все элементы с атрибутом <code>data-action</code>, содержащим <code>delete</code> в списке (через пробел).</li><li>Найти все элементы, у которых ЕСТЬ атрибут <code>data-action</code>, но он НЕ содержит <code>delete</code> в списке (через пробел).</li><li>Выбрать все чётные элементы списка <code>#messages</code>.</li><li>Выбрать один элемент сразу за заголовком <code>h3#widget-title</code> на том же уровне вложенности.</li><li>Выбрать все ссылки, следующие за заголовком <code>h3#widget-title</code> на том же уровне вложенности.</li><li>Выбрать ссылку внутри последнего элемента списка <code>#messages</code>.</li></ol><button-answer data-toggle_answer="" style="">решение</button-answer><task-answer><close- title="закрыть" data-close_answer=""></close-><code-example><script>`<!DOCTYPE HTML>\n<html>\n\n<head>\n  <meta charset="utf-8">\n</head>\n\n<body>\n\n  <input type="checkbox">\n  <input type="checkbox" checked>\n  <input type="text" id="message">\n\n  <h3 id="widget-title">Сообщения:</h3>\n  <ul id="messages">\n    <li id="message-1">Сообщение 1</li>\n    <li id="message-2">Сообщение 2</li>\n    <li id="message-3" data-action="delete">Сообщение 3</li>\n    <li id="message-4" data-action="edit do-not-delete">Сообщение 4</li>\n    <li id="message-5" data-action="edit delete">Сообщение 5</li>\n    <li><a href="#">...</a></li>\n  </ul>\n\n\n  <a href="http://site.com/list.zip">Ссылка на архив</a>\n  <a href="http://site.com/list.pdf">..И на PDF</a>\n\n\n  <script>\n    // тестовая функция для селекторов\n    // проверяет, чтобы элементов по селектору selector было ровно count\n    function test(selector, count) {\n      var elems = document.querySelectorAll(selector);\n      var ok = (elems.length == count);\n\n      if (!ok) alert(selector + ": " + elems.length + " != " + count);\n    }\n\n    // ------------- селекторы --------------\n\n    // Выбрать input типа checkbox\n    test('input[type="checkbox"]', 2);\n\n    // Выбрать input типа checkbox, НЕ отмеченный\n    test('input[type="checkbox"]:not(:checked)', 1);\n\n    // Найти все элементы с id=message или message-*\n    test('[id|="message"]', 6);\n\n    // Найти все элементы с id=message-*\n    test('[id^="message-"]', 5);\n\n    // Найти все ссылки с расширением href="...zip"\n    test('a[href$=".zip"]', 1);\n\n    // Найти все элементы с data-action, содержащим delete в списке (через пробел)\n    test('[data-action~="delete"]', 2);\n\n    // Найти все элементы, у которых ЕСТЬ атрибут data-action,\n    // но он НЕ содержащит delete в списке (через пробел)\n    test('[data-action]:not([data-action~="delete"])', 1);\n\n    // Выбрать все чётные элементы списка #messages\n    test('#messages li:nth-child(2n)', 3);\n\n    // Выбрать один элемент сразу за заголовком h3#widget-title\n    // на том же уровне вложенности\n    test('h3#widget-title + *', 1);\n\n    // Выбрать все ссылки, следующие за заголовком h3#widget-title\n    // на том же уровне вложенности\n    test('h3#widget-title ~ a', 2);\n\n    // Выбрать ссылку внутри последнего элемента списка #messages\n    test('#messages li:last-child a', 1);\n  <\/script>\n</body>\n\n</html>`</script><code-toolbar- iframe="300"><a data-code_run="0" title="показать"></a><a title="открыть в новом окне" data-new_window="code"></a><a title="редактировать в песочнице" data-code_edit=""></a></code-toolbar-></code-example></task-answer></task-content><task-content><h3><a href="#12" name="12">Отступ между элементами, размер одна строка</a><task-open hover-style="" data-show_task="" title="Открыть задачу"></task-open></h3><span title="Насколько эта задача важна для освоения материала, от 1 до 5">важность: 4</span><p>Есть список <code>UL/LI</code>.</p><code-example><script>`<style>\n  GOLD_body_GOLD {\n    font: 14px/1.5 Georgia, serif;\n  }\n</style>\n\nТекст вверху без отступа от списка.\n<ul>\n  <li>Маша</li>\n  <li>Паша</li>\n  <li>Даша</li>\n  <li>Женя</li>\n  <li>Саша</li>\n  <li>Гоша</li>\n</ul>\nТекст внизу без отступа от списка.`</script><code-toolbar- iframe="220"><a title="показать" data-code_run="0"></a><a-></a-><a id="task_2" title="редактировать в песочнице" data-code_edit=""></a></code-toolbar-></code-example><p>Размеры шрифта и строки заданы стилем:</p><code-example><script>`GOLD_body_GOLD {\n  font: 14px/1.5 Georgia, serif;\n}`</script></code-example><p><strong>Сделайте, чтобы между элементами был вертикальный отступ.</strong></p><ul><li>Размер отступа: ровно 1 строка.</li><li>Нужно добавить только одно правило CSS с одним псевдоселектором, можно использовать CSS3.</li><li>Не должно быть лишних отступов сверху и снизу списка.</li></ul><p>Результат:</p><code-result-><code-toolbar-><a-></a-><a title="открыть в новом окне" data-new_window=""></a><a id="answer_2" style="display:none" data-code_edit=""></a></code-toolbar-><iframe style="height:300px" src="selectors_task.html"></iframe></code-result-><p><a data-click="task_2">Открыть песочницу для задачи.</a></p><button-answer data-toggle_answer="" style="">решение</button-answer><task-answer-ext><button-answer-ext data-toggle_answer_ext="" style="">Выбор элементов</button-answer-ext><task-answer><close- title="закрыть" data-close_answer=""></close-><h4>Выбор элементов</h4><p>Для выбора элементов, начиная с первого, можно использовать селектор <a href="http://css-tricks.ru/Articles/Details/HowNthChildWorks">nth-child</a>.</p><p>Его вид: <code>li:nth-child(n+2)</code>, т.к. <code>n</code> идёт от нуля, соответственно первым будет второй элемент (<code>n=0</code>), что нам и нужно.</p></task-answer><button-answer-ext data-toggle_answer_ext="" style="">Решение</button-answer-ext><task-answer><close- title="закрыть" data-close_answer=""></close-><h4>Решение</h4><p>Отступ, размером в одну строку, при <code>line-height: 1.5</code> – это <code>1.5em</code>.</p><p>Правило:</p><code-example><script>`GOLD_li:nth-child(n+2)_GOLD {\n  margin: 1.5em 0 0 0;\n}`</script></code-example></task-answer><button-answer-ext data-toggle_answer_ext="" style="">Ещё решение</button-answer-ext><task-answer><close- title="закрыть" data-close_answer=""></close-><h4>Ещё решение</h4><p>Ещё один вариант селектора: <code>li + li</code></p><code-example><script>`GOLD_li + li_GOLD {\n  margin: 1.5em 0 0 0;\n}`</script></code-example><p><a data-click="answer_2">Открыть решение в песочнице.</a></p></task-answer></task-answer-ext></task-content><task-content><h3><a href="#13" name="13">Отступ между парами, размером со строку</a><task-open hover-style="" data-show_task="" title="Открыть задачу"></task-open></h3><span title="Насколько эта задача важна для освоения материала, от 1 до 5">важность: 4</span><p>Есть список <code>UL/LI,</code><a href="#task_2"> из предыдущей задачи.</a></p><p><strong>Сделайте, чтобы между каждой парой элементов был вертикальный отступ.</strong></p><ul><li>Размер отступа: ровно 1 строка.</li><li>Нужно добавить только одно правило CSS, можно использовать CSS3.</li><li>Не должно быть лишних отступов сверху и снизу списка.</li></ul><p>Результат:</p><code-result-><code-toolbar-><a-></a-><a title="открыть в новом окне" data-new_window=""></a><a-></a-></code-toolbar-><iframe style="height:250px" src="selectors_task_1.html"></iframe></code-result-><p><a data-click="task_2">Открыть песочницу для задачи.</a></p><button-answer data-toggle_answer="" style="">решение</button-answer><task-answer-ext><button-answer-ext data-toggle_answer_ext="" style="">Селектор</button-answer-ext><task-answer><close- title="закрыть" data-close_answer=""></close-><h4>Селектор</h4><p>Для отступа между парами, то есть перед каждым нечётным элементом, можно использовать селектор <a href="http://css-tricks.ru/Articles/Details/HowNthChildWorks">nth-child</a>.</p><p>Селектор будет <code>li:nth-child(odd)</code>, к нему нужно ещё добавить отсечение первого элемента: <code>li:nth-child(odd):not(:first-child)</code>.</p><p>Можно поступить и по-другому: <code>li:nth-child(2n+3)</code> выберет все элементы для <code>n=0,1,2...</code>, то есть 3-й, 5-й и далее, те же, что и предыдущий селектор. Немного менее очевидно, зато короче.</p></task-answer><button-answer-ext data-toggle_answer_ext="" style="">Правило</button-answer-ext><task-answer><close- title="закрыть" data-close_answer=""></close-><h4>Правило</h4><p>Отступ, размером в одну строку, при <code>line-height: 1.5</code> – это <code>1.5em</code>.</p><p>Поставим отступ перед каждым <em>нечётным</em> элементом, кроме первого:</p><code-example><script>`GOLD_li:nth-child(odd):not(:first-child)_GOLD {\n  margin: 1.5em 0 0 0;\n}`</script></code-example><p>Получится так:</p><code-example><script>`<!DOCTYPE html>\n<html>\n\n<head>\n  <meta charset="utf-8">\n  <style>\n    GOLD_body_GOLD {\n      font: 14px/1.5 Georgia, serif;\n    }\n\n    GOLD_ul_GOLD {\n      margin: 0;\n    }\n\n    GOLD_li:nth-child(odd):not(:first-child)_GOLD {\n      margin-top: 1.5em;\n    }\n  </style>\n</head>\n\n<body>\n\n  Текст вверху без отступа от списка.\n  <ul>\n    <li>Маша</li>\n    <li>Паша</li>\n    <li>Даша</li>\n    <li>Женя</li>\n    <li>Саша</li>\n    <li>Гоша</li>\n  </ul>\n  Текст внизу без отступа от списка.\n\n</body>\n\n</html>`</script><code-toolbar- iframe="290"><a data-code_run="0" title="показать"></a><a id="answer_3" data-code_edit="" title="открыть в песочнице"></a></code-toolbar-></code-example><p><a data-click="answer_3">Открыть решение в песочнице.</a></p></task-answer></task-answer-ext></task-content><banner-bottom class="banner-bottom" style="display: block;"></banner-bottom><script>! function(){/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)||screen.width<1024||"bannerBottomDisabled" in localStorage||(localStorage.bannerBottomShownCount||(localStorage.bannerBottomShownCount=1),document.querySelector(".banner-bottom").style.display="block")}();</script><nav-book data-tooltips="Особенности свойства 'height' в %; CSS-спрайты"></nav-book><share-map><share-></share-><map-button hover-style="" data-load_page="l"></map-button></share-map><comments- id="comments"></comments-><div id="disqus_thread"></div><script>disqus_url="https:\/\/learn.javascript.ru\/css-selectors",disqus_identifier="css-selectors",disqus_title="\u0417\u043d\u0430\u0435\u0442\u0435 \u043b\u0438 \u0432\u044b \u0441\u0435\u043b\u0435\u043a\u0442\u043e\u0440\u044b?";</script></page-content></main>