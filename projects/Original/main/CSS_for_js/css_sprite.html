<main><page-content><nav-up><home- data-load_page="0" hover-style=""></home-><arrow-next></arrow-next><a data-load_page="197">CSS для JavaScript-разработчика</a></nav-up><h1>CSS-спрайты</h1><p>CSS-спрайт – способ объединить много изображений в одно, чтобы:</p><ol><li>Сократить количество обращений к серверу.</li><li>Загрузить несколько изображений сразу, включая те, которые понадобятся в будущем.</li><li>Если у изображений сходная палитра, то объединённое изображение будет меньше по размеру, чем совокупность исходных картинок.</li></ol><p>Рассмотрим, как это работает, на примере дерева:</p><code-example><script>`<style>\n  GOLD_.icon_GOLD {\n    width: 16px;\n    height: 16px;\n    float: left;\n  }\n    \n  GOLD_.open .icon_GOLD {\n    cursor: pointer;\n    background: url(minus.gif);\n  }\n    \n  GOLD_.closed .icon_GOLD {\n    cursor: pointer;\n    background: url(plus.gif);\n  }\n    \n  GOLD_.leaf .icon_GOLD {\n    cursor: text;\n    background: url(article.gif);\n  }\n    \n  GOLD_li_GOLD {\n    list-style: none;\n  }\n    \n  GOLD_.text_GOLD {\n    margin: 6px 0 6px 16px;\n  }\n</style>\n\n<ul>\n  <li class="open">\n    <div class="icon"></div>\n    <div class="text">Раздел 1\n      <br>В две строки</div>\n    <ul>\n      <li class="closed">\n        <div class="icon"></div>\n        <div class="text">Раздел 1.1 в одну строку</div>\n      </li>\n      <li class="leaf">\n        <div class="icon"></div>\n        <div class="text">Страница 1.2\n          <br> в две строки</div>\n      </li>\n    </ul>\n  </li>\n  <li class="closed">\n    <div class="icon"></div>\n    <div class="text">Раздел 2\n      <br>В две строки</div>\n  </li>\n</ul>`</script><code-toolbar- iframe="200"><a data-code_run="0" title="показать"></a><a title="открыть в новом окне" data-new_window="code"></a><a title="редактировать в песочнице" data-code_edit=""></a></code-toolbar-></code-example><p>Сейчас «плюс», «минус» и «статья» – три отдельных изображения. Объединим их в спрайт.</p><h2><a name="0" href="#0">Шаг 1. Использовать background</a></h2><p>Первый шаг к объединению изображений в «спрайт» – показывать их через <code>background</code>., а не через тег <code>IMG</code>.</p><p>В данном случае он уже сделан. Стиль для дерева:</p><code-example><script>`GOLD_.icon_GOLD {\n  width: 16px;\n  height: 16px;\n  float: left;\n}\n\nGOLD_.open .icon_GOLD {\n  cursor: pointer;\n  background: url(minus.gif);\n}\n\nGOLD_.closed .icon_GOLD {\n  cursor: pointer;\n  background: url(plus.gif);\n}\n\nGOLD_.leaf .icon_GOLD {\n  cursor: text;\n  background: url(article.gif);\n}`</script></code-example><h2><a name="1" href="#1">Шаг 2. Объединить изображения</a></h2><p>Составим из нескольких изображений одно <code>icons.gif</code>, расположив их, например, по вертикали.</p><p>Из <img src="plus.gif" alt="" width="16" height="16">, <img src="minus.gif" alt="" width="16" height="16"> и <img src="article.gif" alt="" width="16" height="16"> получится одна картинка: <img src="icons.gif" alt="" width="16" height="48"></p><h2><a name="2" href="#2">Шаг 3. Показать часть спрайта в «окошке»</a></h2><p>А теперь самое забавное. Размер <code>DIV'а</code> для иконки – жёстко фиксирован:</p><code-example><script>`/*+ no-beautify */\nGOLD_.icon_GOLD {\nMARK  width: 16px;\nMARK  height: 16px;\n  float: left;\n}`</script></code-example><p>Это значит, что если поставить <code>background'ом</code> объединённую картинку, то вся она не поместится, будет видна только верхняя часть:</p><code-result><iframe style="height:60px" src="sprite_tree_1.html"></iframe></code-result><p>Если бы высота иконки была больше, например, <code>16x48</code>, как в примере ниже, то было бы видно и остальное:</p><code-result><iframe style="height:80px" src="sprite_tree_2.html"></iframe></code-result><p>…Но так как там всего <code>16px</code>, то помещается только одно изображение.</p><h2><a name="3" href="#3">Шаг 4. Сдвинуть спрайт</a></h2><p>Сдвиг фона <code>background-position</code> позволяет выбирать, какую именно часть спрайта видно.</p><p>В спрайте <code>icons.gif</code> изображения объединены так, что сдвиг на <code>16px</code> покажет следующую иконку:</p><code-example><script>`/*+ no-beautify */\nGOLD_.icon_GOLD {\n  width: 16px;\n  height: 16px;\n  float: left;\n  background: url(icons.gif) no-repeat;\n}\n\nGOLD_.open .icon_GOLD {\n  background-position: 0 -16px; /* вверх на 16px */\n  cursor: pointer;\n}\n\nGOLD_.closed .icon_GOLD {\n  background-position: 0 0px; /* по умолчанию */\n  cursor: pointer;\n}\n\nGOLD_.leaf .icon_GOLD {\n  background-position: 0 -32px; /* вверх на 32px */\n  cursor: text;\n}`</script></code-example><p>Результат:</p><code-example><script>`<style>\n  GOLD_.icon_GOLD {\n    width: 16px;\n    height: 16px;\n    float: left;\n    background: url(icons.gif) no-repeat;\n  }\n    \n  GOLD_.open .icon_GOLD {\n    background-position: 0 -16px;\n    cursor: pointer;\n  }\n    \n  GOLD_.closed .icon_GOLD {\n    background-position: 0 0px;\n    cursor: pointer;\n  }\n    \n  GOLD_.leaf .icon {\n    background-position: 0 -32px;\n    cursor: text;\n  }\n    \n  GOLD_li_GOLD {\n    list-style: none;\n  }\n    \n  GOLD_.text_GOLD {\n    margin: 6px 0 6px 16px;\n  }\n</style>\n\n<ul>\n  <li class="open">\n    <div class="icon"></div>\n    <div class="text">Раздел 1\n      <br>В две строки</div>\n    <ul>\n      <li class="closed">\n        <div class="icon"></div>\n        <div class="text">Раздел 1.1 в одну строку</div>\n      </li>\n      <li class="leaf">\n        <div class="icon"></div>\n        <div class="text">Страница 1.2\n          <br> в две строки</div>\n      </li>\n    </ul>\n  </li>\n  <li class="closed">\n    <div class="icon"></div>\n    <div class="text">Раздел 2\n      <br>В две строки</div>\n  </li>\n</ul>`</script><code-toolbar- iframe="200"><a data-code_run="0" title="показать"></a><a title="открыть в новом окне" data-new_window="code"></a><a title="редактировать в песочнице" data-code_edit=""></a></code-toolbar-></code-example><ul><li>В спрайт могут объединяться изображения разных размеров, т.е. сдвиг может быть любым.</li><li>Сдвигать можно и по горизонтали и по вертикали.</li></ul><h3><a name="7" href="#7">Отступы</a></h3><p>Обычно отступы делаются <code>margin/padding</code>, но иногда их бывает удобно предусмотреть в спрайте.</p><p>Тогда если элемент немного больше, чем размер изображения, то в «окошке» не появится лишнего.</p><p>Пример спрайта с отступами:</p><figure><img src="sprites-example.png" alt="" width="100%" style="max-width:423px"></figure><p>Иконка RSS находится в нём на координатах <code>(90px, 40px)</code>:</p><figure><img src="sprites-example-lines2.png" alt="" width="100%" style="max-width:472px"></figure><p>Это значит, что чтобы показать эту иконку, нужно сместить фон:</p><code-example><script>`background-position: -90px -40px;`</script></code-example><p>При этом в левом-верхнем углу фона как раз и будет эта иконка:</p><figure- style="padding: 10px;"><style>.rss{width:35px;height:35px;border:1px solid #000;float:left;background-image:url(sprites-example.png);background-position:-90px -40px}</style><div class="rss"></div>Очень интересная новость Очень интересная новость Очень интересная новость Очень интересная новость Очень интересная новость Очень интересная новость Очень интересная новость Очень интересная новость Очень интересная новость Очень интересная новость</figure-><p>Элемент, в котором находится иконка (в рамке), больше по размеру, чем картинка.</p><p>Его стиль:</p><code-example><script>`/*+ no-beautify */\nGOLD_.rss_GOLD {\n  width: 35px; /* ширина/высота больше чем размер иконки */\n  height: 35px;\n  border: 1px solid black;\n  float: left;\n  BLUE_background-image_BLUE: url(sprite.png);\n  background-position: -90px -40px;\n}`</script></code-example><p>Если бы в спрайте не было отступов, то в такое большое «окошко» наверняка влезли бы другие иконки.</p><h2><a name="4" href="#4">Итого</a></h2><important-><h3>Когда использовать для изображений <code>IMG</code>, а когда – <code>CSS background</code>?</h3><p>Решение лучше всего принимать, исходя из принципов семантической вёрстки.</p><p>Задайте вопрос – что здесь делает изображение? Является ли оно самостоятельным элементом страницы (фотография, аватар посетителя), или же оформляет что-либо (иконка узла дерева)?</p><p>Элемент <code>IMG</code> следует использовать в первом случае, а для оформления у нас есть CSS.</p></important-><p>Спрайты позволяют:</p><ol><li>Сократить количество обращений к серверу.</li><li>Загрузить несколько изображений сразу, включая те, которые понадобятся в будущем.</li><li>Если у изображений сходная палитра, то объединённое изображение будет меньше по размеру, чем совокупность исходных картинок.</li></ol><p>Если фоновое изображение нужно повторять по горизонтали или вертикали, то спрайты тоже подойдут – изображения в них нужно располагать в этом случае так, чтобы при повторении не были видны соседи, т.е., соответственно, вертикально или горизонтально, но не «решёткой».</p><p>Далее мы встретимся со спрайтами при создании интерфейсов, чтобы кнопка при наведении меняла своё изображение. Один спрайт будет содержать все состояния кнопки, а переключение внешнего вида – осуществляться при помощи сдвига <code>background-position</code>.</p><p>Для автоматизированной сборки спрайтов используются специальные инструменты, например <a href="http://csssprites.org/">SmartSprites</a>.</p><banner-bottom class="banner-bottom" style="display: block;"></banner-bottom><script>! function(){/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)||screen.width<1024||"bannerBottomDisabled" in localStorage||(localStorage.bannerBottomShownCount||(localStorage.bannerBottomShownCount=1),document.querySelector(".banner-bottom").style.display="block")}();</script><nav-book data-tooltips="Знаете ли вы селекторы?; Правила форматирования CSS"></nav-book><share-map><share-></share-><map-button hover-style="" data-load_page="l"></map-button></share-map><comments- id="comments"></comments-><div id="disqus_thread"></div><script>disqus_url="https:\/\/learn.javascript.ru\/css-sprite",disqus_identifier="css-sprite",disqus_title="CSS-\u0441\u043f\u0440\u0430\u0439\u0442\u044b";</script></page-content></main>