<main><page-content><nav-up><home- data-load_page="0" hover-style=""></home-><arrow-next></arrow-next><a data-load_page="197">CSS для JavaScript-разработчика</a></nav-up><h1>Особенности свойства "height" в %</h1><p>Обычно свойство <code>height</code>, указанное в процентах, означает высоту относительно внешнего блока.</p><p>Однако, всё не так просто. Интересно, что для произвольного блочного элемента <code>height</code> в процентах работать не будет!</p><p>Чтобы лучше понимать ситуацию, рассмотрим пример.</p><h2><a name="0" href="#0">Пример</a></h2><p>Наша цель – получить вёрстку такого вида:</p><figure-><code-toolbar-><a-></a-><a title="открыть в новом окне" data-new_window=""></a><a title="редактировать в песочнице" data-code_edit=""></a></code-toolbar-><style>container-{display:block;border:1px solid #000;position:relative}container- content-{display:block;margin-left:35px}container- toggler-{display:block;height:100%;background:#eee url(arrow_left.png) center center no-repeat;border-right:#aaa 1px solid;width:30px;position:absolute;left:0;top:0;cursor:pointer}container- p{font-size:90%;margin:12px;line-height:normal}</style><container-><toggler-></toggler-><content-><p>Ви́нни-Пу́х (англ. Winnie-the-Pooh) — плюшевый мишка, персонаж повестей и стихов Алана Александра Милна (цикл не имеет общего названия и обычно тоже называется «Винни-Пух», по первой книге). Один из самых известных героев детской литературы XX века.</p><p>В 1960-е—1970-е годы, благодаря пересказу Бориса Заходера «Винни-Пух и все-все-все», а затем и фильмам студии «Союзмультфильм», где мишку озвучивал Евгений Леонов, Винни-Пух стал очень популярен и в Советском Союзе.</p></content-></container-></figure-><p><strong>При этом блок с левой стрелкой должен быть отдельным элементом внутри контейнера.</strong></p><p>Это удобно для интеграции с JavaScript, чтобы отлавливать на нём клики мыши.</p><p>То есть, HTML-код требуется такой:</p><code-example><script>`<RED_container-_RED>\n  <RED_toggler-RED_>\n    <!-- стрелка влево при помощи CSS, ширина фиксирована -->\n  </RED_toggler->\n  <content->\n    ...Текст...\n  </content->\n</RED_container-RED_>`</script></code-example><p>Как это реализовать? Подумайте перед тем, как читать дальше…</p><p>Придумали?.. Если да – продолжаем.</p><p>Есть разные варианты, но, возможно, вы решили сдвинуть <code>toggler-</code> влево, при помощи <code>float:left</code> (тем более что он фиксированной ширины) и увеличить до <code>height: 100%</code>, чтобы он занял всё пространство по вертикали.</p><p><strong>Вы ещё не видите подвох? Смотрим внимательно, что будет происходить с <code>height: 100%</code>…</strong></p><h2><a name="1" href="#1">Демо height:100% + float:left</a></h2><p>CSS:</p><code-example><script>`GOLD_container-_GOLD {\n  display:block;\n  border: 1px solid black;\n}\n\nGOLD_content-_GOLD {\n  display:block;\n  HIGH/* margin-left нужен, так как слева от содержимого будет стрелка */LIGHT\n  margin: 0 0 0 35px;\n}\n\nGOLD_toggler-_GOLD {\n  display:block;\n  HIGH/* Зададим размеры блока со стрелкой */LIGHT\n  height: 100%;\n  width: 30px;\n  float: left;\n\n  background: #EEE url("arrow_left.png") center center no-repeat;\n  BLUE_border-right_BLUE: #AAA 1px solid;\n  cursor: pointer;\n}`</script></code-example><p>А теперь – посмотрим этот вариант в действии:</p><figure-><code-toolbar-><a-></a-><a title="открыть в новом окне" data-new_window=""></a><a title="редактировать в песочнице" data-code_edit=""></a></code-toolbar-><style>container-1{display:block;border:1px solid #000;position:relative}container-1 content-{display:block;margin-left:35px}container-1 toggler-{display:block;height:100%;background:#eee url(arrow_left.png) center center no-repeat;border-right:#aaa 1px solid;width:30px;float:left;cursor:pointer}container-1 p{font-size:90%;margin:12px;line-height:normal}</style><container-1><toggler-></toggler-><content-><p>Ви́нни-Пу́х (англ. Winnie-the-Pooh) — плюшевый мишка, персонаж повестей и стихов Алана Александра Милна (цикл не имеет общего названия и обычно тоже называется «Винни-Пух», по первой книге). Один из самых известных героев детской литературы XX века.</p><p>В 1960-е—1970-е годы, благодаря пересказу Бориса Заходера «Винни-Пух и все-все-все», а затем и фильмам студии «Союзмультфильм», где мишку озвучивал Евгений Леонов, Винни-Пух стал очень популярен и в Советском Союзе.</p></content-></container-1></figure-><p>Как видно, блок со стрелкой вообще исчез! Куда же он подевался?</p><p>Ответ нам даст спецификация CSS 2.1 <a href="http://www.w3.org/TR/CSS2/visudet.html#propdef-height">пункт 10.5</a>.</p><p><strong>"Если высота внешнего блока вычисляется по содержимому, то высота в % не работает, и заменяется на <code>height:auto</code>. Кроме случая, когда у элемента стоит <code>position:absolute</code>."</strong></p><p>В нашем случае высота <code>.container</code> как раз определяется по содержимому, поэтому для <code>.toggler</code> проценты не действуют, а размер вычисляется как при <code>height:auto</code>.</p><p>Какая же она – эта автоматическая высота? Вспоминаем, что обычно размеры <code>float</code> определяются по содержимому (<a href="http://www.w3.org/TR/CSS2/visudet.html#float-width">10.3.5</a>). А содержимого-то в <code>.toggler</code> нет, так что высота нулевая. Поэтому этот блок и не виден.</p><p>Если бы мы точно знали высоту внешнего блока и добавили её в CSS – это решило бы проблему.</p><p>Например:</p><code-example><script>`/*+ no-beautify */\nGOLD_container-_GOLD {\n  height: 200px; /* теперь height в % внутри будет работать */\n}`</script></code-example><p>Результат:</p><figure-><code-toolbar-><a-></a-><a title="открыть в новом окне" data-new_window=""></a><a title="редактировать в песочнице" data-code_edit=""></a></code-toolbar-><style>container-2{display:block;border:1px solid #000;height:200px}container-2 content-{display:block;margin-left:35px}container-2 toggler-{display:block;height:100%;background:#eee url(arrow_left.png) center center no-repeat;border-right:#aaa 1px solid;width:30px;float:left;cursor:pointer}container-2 p{font-size:90%;margin:12px;line-height:normal}</style><container-2><toggler-></toggler-><content-><p>Ви́нни-Пу́х (англ. Winnie-the-Pooh) — плюшевый мишка, персонаж повестей и стихов Алана Александра Милна (цикл не имеет общего названия и обычно тоже называется «Винни-Пух», по первой книге). Один из самых известных героев детской литературы XX века.</p><p>В 1960-е—1970-е годы, благодаря пересказу Бориса Заходера «Винни-Пух и все-все-все», а затем и фильмам студии «Союзмультфильм», где мишку озвучивал Евгений Леонов, Винни-Пух стал очень популярен и в Советском Союзе.</p></content-></container-2></figure-><p>…Но в данном случае этот путь неприемлем! Ведь мы не знаем, сколько будет текста и какой будет итоговая высота.</p><p>Поэтому решим задачу по-другому.</p><h2><a name="2" href="#2">Правильно: height:100% + position:absolute</a></h2><p>Проценты будут работать, если поставить <code>.toggler</code> свойство <code>position: absolute</code> и спозиционировать его в левом-верхнем углу <code>.container</code> (у которого сделать <code>position:relative</code>):</p><code-example><script>`GOLD_container-_GOLD {\n HIGH position: relative;LIGHT\n  border: 1px solid black;\n}\n\nGOLD_content-_GOLD {\n  margin: 0 0 0 35px;\n}\n\nGOLD_toggler-_GOLD {\nMARK  position: absolute;\nMARK  left: 0;\nMARK  top: 0;\n\n  height: 100%;\n  width: 30px;\n  cursor: pointer;\n\n  BLUE_border-right_BLUE: #AAA 1px solid;\n  background: #EEE url("arrow_left.png") center center no-repeat;\n}`</script></code-example><p>Результат:</p><figure-><code-toolbar-><a-></a-><a title="открыть в новом окне" data-new_window=""></a><a title="редактировать в песочнице" data-code_edit=""></a></code-toolbar-><style>container-{display:block;border:1px solid #000;position:relative}container- content-{display:block;margin-left:35px}container- toggler-{display:block;height:100%;background:#eee url(arrow_left.png) center center no-repeat;border-right:#aaa 1px solid;width:30px;position:absolute;left:0;top:0;cursor:pointer}container- p{font-size:90%;margin:12px;line-height:normal}</style><container-><toggler-></toggler-><content-><p>Ви́нни-Пу́х (англ. Winnie-the-Pooh) — плюшевый мишка, персонаж повестей и стихов Алана Александра Милна (цикл не имеет общего названия и обычно тоже называется «Винни-Пух», по первой книге). Один из самых известных героев детской литературы XX века.</p><p>В 1960-е—1970-е годы, благодаря пересказу Бориса Заходера «Винни-Пух и все-все-все», а затем и фильмам студии «Союзмультфильм», где мишку озвучивал Евгений Леонов, Винни-Пух стал очень популярен и в Советском Союзе.</p></content-></container-></figure-><h2><a name="3" href="#3">Проблема с height: 100%, проявляющаяся, когда у родительского элемента не установлен height, но указан min-height</a></h2><p>Вам необходимо установить height: 1px для родителя, чтобы дочерний элемент смог занять всю высоту указанную в min-height.</p><code-example><script>`GOLD_.parent_GOLD {\n    BLUE_min-height_BLUE: 300px;\n    height: 1px; /* Требуется, чтобы дочерний блок взял высоту 100% */\n}\n\nGOLD_.child_GOLD {\n    height: 100%;\n}`</script></code-example><h2><a name="4" href="#4">Итого</a></h2><ul><li>Свойство <code>height</code>, указанное в %, работает только если для внешнего блока указана высота.</li><li>Стандарт CSS 2.1 предоставляет обход этой проблемы, отдельно указывая, что проценты работают при <code>position:absolute</code>. На практике это часто выручает.</li><li>Если у родительского элемента не установлено height, а указано min-height, то, чтобы дочерний блок занял 100% высоты, нужно родителю поставить свойство height: 1px;</li></ul><banner-bottom class="banner-bottom" style="display: block;"></banner-bottom><script>! function(){/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)||screen.width<1024||"bannerBottomDisabled" in localStorage||(localStorage.bannerBottomShownCount||(localStorage.bannerBottomShownCount=1),document.querySelector(".banner-bottom").style.display="block")}();</script><nav-book data-tooltips="Свойство 'overflow'; Знаете ли вы селекторы?"></nav-book><share-map><share-></share-><map-button hover-style="" data-load_page="l"></map-button></share-map><comments- id="comments"></comments-><div id="disqus_thread"></div><script>disqus_url="https:\/\/learn.javascript.ru\/height-percent",disqus_identifier="height-percent",disqus_title="\u041e\u0441\u043e\u0431\u0435\u043d\u043d\u043e\u0441\u0442\u0438 \u0441\u0432\u043e\u0439\u0441\u0442\u0432\u0430 \"height\" \u0432 %";</script></page-content></main>